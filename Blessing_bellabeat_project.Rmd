---
title: 'Case study 2 : Bellabeat'
author: "Blessing"
output: html_document
---

## Introduction

Welcome to my Bellabeat data analysis case study! In this case study, I will perform real-world tasks of a data analyst. 
And in order to answer some key business questions, I will follow the steps of the
data analysis process: ask, prepare, process, analyze, share, and act. 


## About the Company Bellabeat

Bellabeat, is a high-tech manufacturer of health-focused products for women.
Bellabeat is a successful small company, and they have the potential to become a larger player in the global smart device market. 
Urška Sršen and Sando Mur founded Bellabeat, a high-tech company that manufactures health-focused smart products.
Collecting data on activity, sleep, stress, and reproductive health has allowed Bellabeat to empower women with knowledge about their own health and habits. Since it was founded in 2013, Bellabeat has grown rapidly and quickly positioned itself as a tech-driven wellness company for women.


## Scenario of the Study

In this study, I will focus on one of Bellabeat’s products and analyze smart device data to gain insight into how consumers are using their smart devices. 
The insights will then help guide marketing strategy for the company.

## Questions for the Analysis (Ask phase)

In this phase, I tried to better undestand the data and the problem I'm trying to solve. And to do that, I had to do more research and ask more questions. 

- What are some trends in smart device usage? How could these trends help influence Bellabeat marketing strategy ? So first, the company need to better target their marketing efforts into their customer's needs based on their usage of their fitness smart devices. And then, make high-level recommendations for how these trends can inform Bellabeat marketing strategy.
- Who are the main stakeholders ? The main stakeholders are Urška Sršen, Bellabeat’s co-founder and Chief Creative Officer; Sando Mur, Mathematician and Bellabeat’s cofounder.

## Business Task
Now, after getting answers to all of my questions (during the ask phase), I'm able to define clearly the business task which is:
To analyse how do Bellabeat customers use their smart devices? And then, Identify potential opportunities for growth and recommendations for the Bellabeat marketing team based on trends in smart device usage.

## Preparing the Data (Prepare Phase)
In this phase, I will download and Import the dataset. Then make sure all the data is organized and credible. And I will sort and filter the data.

### Downloading the data

Bellabeat encourages me to use public data that explores smart device users’ daily habits from FitBit Fitness Tracker Data. FitBit Fitness Tracker Data (CC0: Public Domain, dataset made available through Mobius). This Kaggle data set contains personal fitness tracker from thirty fitbit users. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. And It includes information about daily activity, steps, and heart rate that can be used to explore users’ habits.
So, here is the link to download the dataset:

- FitBit Fitness Tracker Data : <https://www.kaggle.com/arashnic/fitbit>.

About the dataset: 

The dataset was generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016 and 05.12.2016. And include 18 CSV files.

## Installing and loading common packages and libraries

```{r}
install.packages('tidyverse')
library(tidyverse)
install.packages("ggplot2")
library(ggplot2)
install.packages("dplyr")
library(dplyr)
install.packages("tidyr")
library(tidyr)
install.packages("readr")
library(readr)
install.packages("skimr")
library(skimr)
install.packages("here")
library(here)
install.packages("janitor")
library(janitor)
install.packages("lubridate")
library(lubridate)
```


## Loading your CSV files
Here we'll create a dataframe named 'activity' and read in one of the CSV files from the dataset. Remember, you can name your dataframe something different, and you can also save your CSV file under a different name as well.

```{r}
activity <- read.csv("dailyActivity_merged.csv")
```

Dataframe for the sleep data. 
```{r}
sleep <- read.csv("sleepDay_merged.csv")
```

Dataframe for the dailycalories data.
```{r}
calories <- read.csv("dailyCalories_merged.csv")
```

Dataframe for the Heartrate seconds data.
```{r}
heartrate <- read.csv("heartrate_seconds_merged.csv")
```

Dataframe for the WeightLogInfo data.
```{r}
weight <- read.csv("weightLogInfo_merged.csv")
```

## Exploring a few key tables

Take a look at the daily_activity data.
```{r}
head(activity)
```

Identify all the columns in the daily_activity data.
```{r}
colnames(activity)
```

Take a look at the sleep data.
```{r}
head(sleep)
```

Identify all the columns in the sleep data.
```{r}
colnames(sleep)
```

Take a look at the daily calories data
```{r}
head(calories)
```

Identify all the columns in the daily calories data
```{r}
colnames(calories)
```

Take a look at the heartrate data
```{r}
head(heartrate)
```

Identify all the columns in the heartrate data
```{r}
colnames(heartrate)
```

Take a look at the weight data
```{r}
head(weight)
```

Identify all the columns in the weight data
```{r}
colnames(weight)
```


## Cleaning the dataset (Process Phase) 

### Basics cleaning:

Now, I'm going to Process, Clean and Organize the dataset for analysis. I used functions like `glimpse()`, `skim_without_charts` to quickly review the data. 
I also clean the names of the data using `clean_names()`.
I also used distinct to remove duplicatws

And here some cleaning steps I did with the data :

- For Dataset (Activity, Calories and Intensities): For the data cleaning steps, I did NOT FOUND in this data (Spelling errors, Misfield values, Missing values, Extra and blank space, no duplicated found). For formatting, I used clear formatting. For Data types, some data were converted to numeric and Dates columns will be converted to date type.

- For Sleep data : 3 duplicates were found and removed. 
- For Weight data : too many missing values were found in(Fat) column. And I decided to remove that column.

```{r}
# Dplyr remove a column by name:
select(weight, -Fat)
```

```{r}
skim_without_charts(activity)
skim_without_charts(calories)
skim_without_charts(heartrate)
skim_without_charts(sleep)
skim_without_charts(weight)
```

```{r}
clean_names(activity)
clean_names(calories)
clean_names(heartrate)
clean_names(sleep)
clean_names(weight)
```
## Remove Duplicates
```{r}
distinct(activity)
distinct(calories)
distinct(sleep)
distinct(heartrate)
distinct(weight)
```


## Fixing Date Format

```{r}
activity$ActivityDate=as.POSIXct(activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
activity$date <- format(activity$ActivityDate, format = "%m/%d/%y")
activity$activityDate=as.Date(activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
activity$date=as.Date(activity$date, format="%m/%d/%Y")

```


## calories
```{r}
calories$ActivityDay=as.Date(calories$ActivityDay, format="%m/%d/%Y", tz=Sys.timezone())
```

## sleep

```{r}

sleep$sleepDay=as.POSIXct(sleep$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
sleep$date <- format(sleep$SleepDay, format = "%m/%d/%y")
sleep$date=as.Date(sleep$date, "% m/% d/% y")
```

## Understanding some summary statistics
How many unique participants are there in each dataframe? It looks like there may be more participants in the daily activity dataset than the sleep dataset.

So, there are 33 participants in the activity and calories dataset. 24 participants in the sleep data. And only 14 participants for heartrate, and only 8 in the weight data set. 8 and 14 participants too small to make any recommendations and conclusions based on these dataset.

So I will focus on these datasets for my analysis: Activity, Calories and Sleep.

Here are some quick summary statistics about each data frame.


```{r distinct users}
n_distinct(activity$Id)
n_distinct(sleep$Id)
n_distinct(weight$Id)
n_distinct(calories$Id)
n_distinct(heartrate$Id)
```

How many observations are there in each dataframe?
```{r observations}
nrow(activity)
nrow(sleep)
nrow(calories)
```

What are some quick summary statistics we'd want to know about each data frame?

For the daily activity dataframe:
```{r}
activity %>%  
  select(TotalSteps,
         TotalDistance,
         SedentaryMinutes) %>%
  summary()
```

For the sleep dataframe:
```{r}
sleep %>%  
  select(TotalSleepRecords,
  TotalMinutesAsleep,
  TotalTimeInBed) %>%
  summary()
```

## For the sleep dataframe:
```{r}
calories %>%
  select(Calories) %>%
  summary()
```

### Key findings from this analysis : 

- The average sedentary time is too high (more than 16 hours). And definitely needs to be reduced with a good marketing strategy. 
- The majority of the participants are lightly active. With a high sedentary time.
- Participants sleep 1 time for an average of 7 hours.
- Average total steps per day (which is 7638) is a little bit less than recommended by the CDC. According to the CDC research, taking 8,000 steps per day was associated with a 51% lower risk for all-cause mortality (or death from all causes). And taking 12,000 steps per day was associated with a 65% lower risk compared with taking 4,000 steps. 
link:https://www.medicalnewstoday.com/articles/how-many-steps-should-you-take-a-day#:~:text=For%20general%20fitness%2C%20most%20adults,Control%20and%20Prevention%20(CDC)%20.

What does this tell us about how this sample of people's activities? 

## Plotting a few explorations

What's the relationship between steps taken in a day and sedentary minutes? How could this help inform the customer segments that we can market to? E.g. position this more as a way to get started in walking more? Or to measure steps that you're already taking?

```{r}
ggplot(data=activity, aes(x=TotalSteps, y=SedentaryMinutes)) + geom_point()
```

I can see here a negative correlation between Steps and Sedentary time. The more Sedentary time you have, 
the less Steps you're taking during the day.
This data shows that the company need to market more the customer segments with high Sedentary time. And to do that, the company needs to find ways to get customers get started in walking more and also measure their daily steps.


What's the relationship between minutes asleep and time in bed? You might expect it to be almost completely linear - are there any unexpected trends?

```{r}
ggplot(data=sleep, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) + geom_point()
```
Most people spend more time in bed than they do Asleep.So to help users improve their sleep, the company should consider using notification to go to sleep.


## Relationship between Steps and Calories

```{r}
ggplot(data=activity, aes(x=TotalSteps, y=Calories)) + 
  geom_point() + geom_smooth() + labs(title="Total Steps vs. Calories")
```

We can see here a positive correlation between Total Steps and Calories. The more active we are, the more calories we will burn.

What could these trends tell you about how to help market this product? Or areas where you might want to explore further?

## Merging these two datasets together

```{r}
combined_data <- merge(sleep, activity, by="Id")
```


```{r}
Combined_data_outer <- merge(sleep, activity, by="Id", all = TRUE)
n_distinct(Combined_data_outer$Id)
```

Take a look at how many participants are in this data set.

```{r}
n_distinct(combined_data$Id)
```

## Conclusions & Recommandations for the Business

So, collecting data on activity, sleep, stress, etc. will allow the company Bellabeat to empower the customers with knowledge about their own health and daily habits. 
The company Bellabeat is growing rapidly and quickly positioned itself as a tech-driven wellness company for their customers.

By analyzing the FitBit Fitness Tracker Data set, I found some insights that would help influence Bellabeat marketing strategy.

### Target Audience:

People working full-time jobs and spending a lot of time at the computer and in the office and need fitness and daily activities to be in shape.

The users are doing some light activity to stay healthy (according to the activity type analysis). And they need to improve their everyday activity to have more health benefits. And they might need some knowledge about developing healthy habits and motivation to keep them going.

### Message to the Company

The Bellabeat app need to be a unique fitness activity app. By becoming a companion guide (like a friend) to its users and customers and help them balance their personal and professional life with healthy habits.

### Recommendations to the Bellabeat Marketing team

- The average sedentary time is too high for the users of the app (more than 16 hours). And definitely needs to be reduced with a good marketing strategy. So, the data shows that the company need to market more to the customer segment with a high Sedentary time. And to do that, the company needs to find ways to get customers started in walking more by measuring their daily steps (+ notifications).

- Participants sleep 1 time for an average of 7 hours. To help users improve their sleep, Bellabeat should consider using app notifications to go to bed. And also, the Bellabeat app can recommend reducing sedentary time for its customers.

- The average total steps per day (which is 7638) is a little bit less than recommended by the CDC. According to the CDC research, taking 8,000 steps per day was associated with a 51% lower risk for all-cause mortality (or death from all causes). And taking 12,000 steps per day was associated with a 65% lower risk compared with taking 4,000 steps. So, Bellabeat can encourage people to take at least 8,000 steps per day by explaining the healthy benefits of doing that.

- For customers who want to lose weight, it can be a good idea to control daily calorie consumption. And Bellabeat can suggest some ideas for low-calorie healthy food.



Thank you very much for your interest in my Bellabeat Case Study!

And I would appreciate any comments and recommendations for improvement!

Please stay well and bye bye !


Note that there were more participant Ids in the daily activity dataset that have been filtered out using merge. Consider using 'outer_join' to keep those in the dataset. 

Now you can explore some different relationships between activity and sleep as well. For example, do you think participants who sleep more also take more steps or fewer steps per day? Is there a relationship at all? How could these answers help inform the marketing strategy of how you position this new product?

This is just one example of how to get started with this data - there are many other files and questions to explore as well!